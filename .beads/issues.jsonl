{"id":"pdfbox-09e","title":"Create comprehensive porting plan for Crystal PDFBox","description":"Create plan.md outlining the strategy for porting Apache PDFBox to Crystal, including milestones, approach, Crystal idioms, and Prawn compatibility layer.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T22:30:00.166503-07:00","created_by":"dominic","updated_at":"2026-01-24T22:30:07.493566-07:00","closed_at":"2026-01-24T22:30:07.493566-07:00","close_reason":"Created comprehensive plan.md file outlining:\n- 9 milestones for porting Apache PDFBox to Crystal\n- Crystal idioms and standard library usage\n- Test porting strategy\n- Prawn compatibility layer\n- Beads issue tracking approach\n- Development workflow and success metrics"}
{"id":"pdfbox-0c0","title":"Profile remaining PDF loading performance bottlenecks","description":"PDFBOX-3947-670064.pdf loads in ~60 seconds despite optimized xref parsing. Need to profile remaining time (after xref parsing and brute-force search). Likely in object stream parsing, page tree resolution, or repeated decompression. Add more granular timing logs and identify hotspots.","status":"open","priority":2,"issue_type":"task","owner":"dsisnero@gmail.com","created_at":"2026-01-28T01:47:05.198627-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-28T01:47:05.198627-07:00","labels":["parser","performance","profiling"]}
{"id":"pdfbox-0u7","title":"Ensure xref merging resolves latest object versions","description":"When parsing multiple xref sections (traditional + streams), ensure latest object versions override older ones. Important for catalog resolution if multiple catalog versions exist in PDF incremental updates.","status":"closed","priority":3,"issue_type":"task","owner":"dsisnero@gmail.com","created_at":"2026-01-26T21:01:59.041735-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-27T02:10:50.230772-07:00","closed_at":"2026-01-27T02:10:50.230772-07:00","close_reason":"Closed"}
{"id":"pdfbox-0yf","title":"Implement lazy object resolution similar to Apache PDFBox","description":"Port Apache PDFBox lazy object resolution pattern: COSObject should have reference to parser and resolve objects lazily via getObject() method. Parser should maintain object pool. This will fix PageLabels objects not being resolved.","status":"closed","priority":2,"issue_type":"task","owner":"dsisnero@gmail.com","created_at":"2026-01-26T23:40:32.775172-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-27T01:04:10.327936-07:00","closed_at":"2026-01-27T01:04:10.327936-07:00","close_reason":"Closed","dependencies":[{"issue_id":"pdfbox-0yf","depends_on_id":"pdfbox-1bz","type":"blocks","created_at":"2026-01-26T23:59:02.32834-07:00","created_by":"Dominic Sisneros"},{"issue_id":"pdfbox-0yf","depends_on_id":"pdfbox-oec","type":"blocks","created_at":"2026-01-26T23:59:11.937234-07:00","created_by":"Dominic Sisneros"},{"issue_id":"pdfbox-0yf","depends_on_id":"pdfbox-ed0","type":"blocks","created_at":"2026-01-26T23:59:11.989685-07:00","created_by":"Dominic Sisneros"},{"issue_id":"pdfbox-0yf","depends_on_id":"pdfbox-8gv","type":"blocks","created_at":"2026-01-26T23:59:12.044761-07:00","created_by":"Dominic Sisneros"},{"issue_id":"pdfbox-0yf","depends_on_id":"pdfbox-6um","type":"blocks","created_at":"2026-01-26T23:59:12.097805-07:00","created_by":"Dominic Sisneros"},{"issue_id":"pdfbox-0yf","depends_on_id":"pdfbox-qfz","type":"blocks","created_at":"2026-01-26T23:59:12.150977-07:00","created_by":"Dominic Sisneros"},{"issue_id":"pdfbox-0yf","depends_on_id":"pdfbox-l1i","type":"blocks","created_at":"2026-01-26T23:59:12.203875-07:00","created_by":"Dominic Sisneros"},{"issue_id":"pdfbox-0yf","depends_on_id":"pdfbox-9mk","type":"blocks","created_at":"2026-01-26T23:59:12.256765-07:00","created_by":"Dominic Sisneros"},{"issue_id":"pdfbox-0yf","depends_on_id":"pdfbox-2q1","type":"blocks","created_at":"2026-01-26T23:59:12.309033-07:00","created_by":"Dominic Sisneros"}]}
{"id":"pdfbox-176","title":"Set up Crystal project structure mirroring PDFBox modules","description":"Create Crystal source directory structure matching Apache PDFBox modules: pdfbox/, fontbox/, xmpbox/, io/, tools/. Ensure proper module naming and organization.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T22:34:19.477437-07:00","created_by":"dominic","updated_at":"2026-01-24T22:44:32.821239-07:00","closed_at":"2026-01-24T22:44:32.821239-07:00","close_reason":"Created Crystal project structure mirroring Apache PDFBox modules:\n- Created directory structure: pdfbox/, fontbox/, xmpbox/, io/, tools/\n- Created module files: pdfbox/cos.cr, pdfbox/pdmodel.cr, pdfbox/io.cr\n- Created top-level modules: fontbox.cr, xmpbox.cr, tools.cr\n- Updated main pdfbox.cr to require all modules\n- Updated spec tests to test new structure\n- All tests pass, code formatted and linted","dependencies":[{"issue_id":"pdfbox-176","depends_on_id":"pdfbox-k6g","type":"blocks","created_at":"2026-01-24T22:34:27.193725-07:00","created_by":"dominic"}]}
{"id":"pdfbox-1bz","title":"Make Parser inherit from ICOSParser and implement required methods","description":"Parser class needs to inherit from Cos::ICOSParser abstract class and implement both abstract methods: dereference_object and create_random_access_read_view. This is the first step in implementing lazy object resolution.","status":"closed","priority":2,"issue_type":"task","owner":"dsisnero@gmail.com","created_at":"2026-01-26T23:57:30.641559-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-27T00:18:06.598895-07:00","closed_at":"2026-01-27T00:18:06.598895-07:00","close_reason":"Closed"}
{"id":"pdfbox-25j","title":"Fix PDFScanner reading entire file for each object causing 90ms parse times","status":"closed","priority":2,"issue_type":"task","owner":"dsisnero@gmail.com","created_at":"2026-01-28T20:04:27.205784-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-29T11:48:34.477045-07:00","closed_at":"2026-01-29T11:48:34.477045-07:00","close_reason":"Duplicate of pdfbox-jxu"}
{"id":"pdfbox-2dv","title":"Implement basic PDF header parsing/writing","description":"Implement PDF version header detection in Parser and header writing in Writer. PDF headers look like '%PDF-1.4' followed by binary comment '%âãÏÓ'.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T22:50:47.013578-07:00","created_by":"dominic","updated_at":"2026-01-25T00:17:41.145888-07:00","closed_at":"2026-01-25T00:17:41.145888-07:00","close_reason":"Closed"}
{"id":"pdfbox-2ks","title":"Ensure proper cleanup in object stream cache","description":"Make sure objects are removed from cache after dereferencing or handle cache lifecycle properly","status":"closed","priority":3,"issue_type":"task","owner":"dsisnero@gmail.com","created_at":"2026-01-27T01:16:11.697967-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-27T01:34:27.467332-07:00","closed_at":"2026-01-27T01:34:27.467332-07:00","close_reason":"Closed"}
{"id":"pdfbox-2q1","title":"Test with page labels test to verify objects are resolved","description":"After implementing lazy resolution, run the page labels test (spec/pdfbox/pdmodel/page_labels_spec.cr) to verify that objects 1350, 1358, 1360 are properly resolved and page labels are generated correctly.","status":"closed","priority":2,"issue_type":"task","owner":"dsisnero@gmail.com","created_at":"2026-01-26T23:58:51.810774-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-27T01:03:53.026798-07:00","closed_at":"2026-01-27T01:03:53.026798-07:00","close_reason":"Closed"}
{"id":"pdfbox-334","title":"Parse catalog and pages objects from xref","description":"Parse catalog and pages objects from xref table. Currently parser only counts pages from xref entries but doesn't actually parse the catalog, pages, and page dictionaries. Need to implement full object parsing to extract document structure and metadata.\n\nDEPENDS ON:\n- pdfbox-j6t: Port TestPDDocumentCatalog tests\n- pdfbox-laf: Port TestPDFParser tests  \n- pdfbox-gt2: Port TestCOSParser tests\n\nThese tests should be ported first (TDD approach) to ensure implementation is correct.","status":"closed","priority":3,"issue_type":"task","assignee":"Dominic Sisneros","owner":"dsisnero@gmail.com","created_at":"2026-01-25T01:31:53.569476-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-27T02:12:39.78704-07:00","closed_at":"2026-01-27T02:12:39.78704-07:00","close_reason":"Closed","dependencies":[{"issue_id":"pdfbox-334","depends_on_id":"pdfbox-0u7","type":"blocks","created_at":"2026-01-26T21:02:05.612694-07:00","created_by":"Dominic Sisneros"}]}
{"id":"pdfbox-3g1","title":"Optimize brute-force search for object streams (bf_search_for_obj_streams_xref)","description":"bf_search_for_obj_streams_xref takes ~1.7 seconds due to inefficient find_string scanning. Should apply memory-based scanning similar to bf_search_for_objects optimization. Load file range into memory and search for 'stream' pattern once.","status":"closed","priority":2,"issue_type":"task","owner":"dsisnero@gmail.com","created_at":"2026-01-28T01:47:00.410701-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-28T03:00:54.781213-07:00","closed_at":"2026-01-28T03:00:54.781213-07:00","close_reason":"Optimized with in-memory parsing (1300x speedup: 2000ms -\u003e 1.55ms)","labels":["brute-force","parser","performance"]}
{"id":"pdfbox-3xv","title":"Implement PDFIO utilities for parser and writer","description":"Implement basic PDFIO utility functions in both pdfparser.cr and pdfwriter.cr: skip_whitespace, peek, read/write string/name/number, etc. These are foundational for parsing/writing PDF syntax.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T22:50:33.653807-07:00","created_by":"dominic","updated_at":"2026-01-24T23:04:00.47989-07:00","closed_at":"2026-01-24T23:04:00.47989-07:00","close_reason":"Closed"}
{"id":"pdfbox-4df","title":"Port remaining PDF parser tests from Apache PDFBox","description":"Port all remaining tests from TestPDFParser.java to Crystal specs: PDFBOX-3208, 3783, 3785, 3950, 3951, 3964, 3977, parse genko, 4338, 4339, 4153, 4490, 5025.","status":"open","priority":2,"issue_type":"task","owner":"dsisnero@gmail.com","created_at":"2026-01-27T14:48:38.395038-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-27T14:48:38.395038-07:00"}
{"id":"pdfbox-4qi","title":"Update pdfbox.cr to require parser/writer modules","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T22:50:25.618546-07:00","created_by":"dominic","updated_at":"2026-01-24T22:51:36.731442-07:00","closed_at":"2026-01-24T22:51:36.731442-07:00","close_reason":"Closed"}
{"id":"pdfbox-6um","title":"Implement dereference_object method in Parser","description":"Parser needs to implement dereference_object method from ICOSParser interface. This method should resolve Cos::Object using object pool and parse object dynamically similar to Apache PDFBox's COSParser.dereferenceCOSObject.","status":"closed","priority":2,"issue_type":"task","owner":"dsisnero@gmail.com","created_at":"2026-01-26T23:58:24.372912-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-27T00:18:42.453005-07:00","closed_at":"2026-01-27T00:18:42.453005-07:00","close_reason":"Closed"}
{"id":"pdfbox-7yu","title":"Create basic I/O layer using Crystal's IO classes","description":"Implement I/O layer for PDF reading/writing using Crystal's IO, File, and Stream classes. Replace Java streams with Crystal equivalents.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T22:34:19.65933-07:00","created_by":"dominic","updated_at":"2026-01-24T22:45:36.855326-07:00","closed_at":"2026-01-24T22:45:36.855326-07:00","close_reason":"Implemented basic I/O layer: RandomAccessRead interface with Memory and File implementations, I/O utility functions. Basic functionality for PDF reading/writing. More advanced features (scratch files, stream caching, etc.) will be added in later milestones.","dependencies":[{"issue_id":"pdfbox-7yu","depends_on_id":"pdfbox-k6g","type":"blocks","created_at":"2026-01-24T22:34:27.373403-07:00","created_by":"dominic"}]}
{"id":"pdfbox-8bu","title":"Implement page labels extraction from catalog","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-26T18:43:30.523297-07:00","created_by":"dominic","updated_at":"2026-01-26T18:43:30.523297-07:00","dependencies":[{"issue_id":"pdfbox-8bu","depends_on_id":"pdfbox-o4u","type":"blocks","created_at":"2026-01-26T21:01:41.5663-07:00","created_by":"Dominic Sisneros"}]}
{"id":"pdfbox-8gv","title":"Update parse_reference to create Cos::Object with parser and key","description":"ObjectParser.parse_reference method needs to create Cos::Object instances with parser reference and ObjectKey instead of creating empty Cos::Object instances. This ensures indirect references remain unresolved until accessed.","status":"closed","priority":2,"issue_type":"task","owner":"dsisnero@gmail.com","created_at":"2026-01-26T23:58:17.365705-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-27T01:02:14.918272-07:00","closed_at":"2026-01-27T01:02:14.918272-07:00","close_reason":"Closed"}
{"id":"pdfbox-8j0","title":"Add decompressed_objects cache field to Parser class","status":"closed","priority":1,"issue_type":"task","owner":"dsisnero@gmail.com","created_at":"2026-01-27T01:15:46.696657-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-27T01:20:13.324328-07:00","closed_at":"2026-01-27T01:20:13.324328-07:00","close_reason":"Closed"}
{"id":"pdfbox-988","title":"Port PDF parser tests from Apache PDFBox","description":"Port all PDF parser test files from Apache PDFBox Java to Crystal specs. Files include: TestCOSParser.java, TestPDFParser.java, TestBaseParser.java, PDFStreamParserTest.java, PDFObjectStreamParserTest.java, EndstreamFilterStreamTest.java.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T23:19:43.518405-07:00","created_by":"dominic","updated_at":"2026-01-25T00:06:42.802511-07:00","closed_at":"2026-01-25T00:06:42.802511-07:00","close_reason":"Closed"}
{"id":"pdfbox-9cb","title":"Complete BruteForceParser implementation for PDFBOX-3947 hang fix","description":"BruteForceParser is partially implemented but not complete. The PDFBOX-3947-670064.pdf still hangs when loaded with lenient mode. Need to:\n1. Implement missing methods from Apache PDFBox BruteForceParser (bfSearchForTrailer, searchForTrailerItems)\n2. Fix performance issues in brute-force search (string? method is inefficient)\n3. Ensure brute-force parser is called appropriately (currently hangs in normal parsing before brute-force kicks in)\n4. Fix any infinite loops in object stream parsing\n5. Remove debug puts statements from ObjectParser (replaced with Log.debug)\nReference: Apache PDFBox BruteForceParser.java","status":"closed","priority":2,"issue_type":"task","owner":"dsisnero@gmail.com","created_at":"2026-01-27T22:51:05.113898-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-28T19:10:41.602747-07:00","closed_at":"2026-01-28T19:10:41.602747-07:00","close_reason":"Closed","labels":["brute-force","corrupted-pdfs","parser"]}
{"id":"pdfbox-9k0","title":"Implement basic COS object writing","description":"Implement COSWriter methods in pdfwriter.cr to write individual COS objects (dictionary, array, string, name, number, boolean, null, stream). These should use PDFIO utilities.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T22:50:39.866609-07:00","created_by":"dominic","updated_at":"2026-01-24T23:13:45.586811-07:00","closed_at":"2026-01-24T23:13:45.586811-07:00","close_reason":"Closed"}
{"id":"pdfbox-9kc","title":"Optimize PNG predictor performance (apply_png_predictor)","description":"PNG predictor (apply_png_predictor) processes 12798 rows with 4 columns. Initial optimization attempt failed due to performance issues in custom implementation. Need to profile and identify why simple pointer-based loop is slow. Possibly due to Crystal bounds checking or type inference. Consider using SIMD or examining Apache PDFBox implementation for optimizations.","status":"closed","priority":2,"issue_type":"task","owner":"dsisnero@gmail.com","created_at":"2026-01-28T01:46:55.597879-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-28T03:12:06.490385-07:00","closed_at":"2026-01-28T03:12:06.490385-07:00","close_reason":"Optimized with fast UP filter implementation (17,500x speedup: 1400ms -\u003e 0.08ms)","labels":["parser","performance","png-predictor"]}
{"id":"pdfbox-9ly","title":"Port core COS (Cos Object System) types","description":"Port COSBase, COSObject, COSArray, COSDictionary, COSName, COSString, COSInteger, COSBoolean, COSFloat. Use Crystal classes/structs with proper typing and Crystal idioms.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T22:34:19.539623-07:00","created_by":"dominic","updated_at":"2026-01-24T22:45:36.77184-07:00","closed_at":"2026-01-24T22:45:36.77184-07:00","close_reason":"Implemented basic COS types: Boolean, Integer, Float, String, Name, Array, Dictionary, Stream, Object, Null. Basic functionality implemented with Crystal idioms. More advanced features (visitor pattern, serialization, etc.) will be added in later milestones.","dependencies":[{"issue_id":"pdfbox-9ly","depends_on_id":"pdfbox-k6g","type":"blocks","created_at":"2026-01-24T22:34:27.256471-07:00","created_by":"dominic"}]}
{"id":"pdfbox-9mk","title":"Update parse_object_from_stream to use object pool","description":"Parser.parse_object_from_stream should check object pool first and create Cos::Object with parser reference for lazy resolution of objects within compressed object streams.","status":"closed","priority":2,"issue_type":"task","owner":"dsisnero@gmail.com","created_at":"2026-01-26T23:58:44.511462-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-27T01:02:24.487324-07:00","closed_at":"2026-01-27T01:02:24.487324-07:00","close_reason":"Closed"}
{"id":"pdfbox-bbb","title":"Implement parse_all_objects_from_stream method that caches objects","description":"Implement method to parse all objects from an object stream and cache them in decompressed_objects map, similar to Apache PDFBox's PDFObjectStreamParser.parseAllObjects()","status":"closed","priority":1,"issue_type":"task","owner":"dsisnero@gmail.com","created_at":"2026-01-27T01:15:53.736349-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-27T01:22:18.684577-07:00","closed_at":"2026-01-27T01:22:18.684577-07:00","close_reason":"Closed"}
{"id":"pdfbox-bcf","title":"Fix hang in PDFBOX-3947-670064.pdf - parser stuck in xref entry parsing","description":"The corrupted PDF causes parser to hang in parse_xref when processing 13420 entries. Need to investigate why loop stalls and potentially integrate brute-force parser as fallback when parsing takes too long or fails.","status":"closed","priority":1,"issue_type":"bug","owner":"dsisnero@gmail.com","created_at":"2026-01-27T23:17:42.803321-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-28T01:23:20.632995-07:00","closed_at":"2026-01-28T01:23:20.632995-07:00","close_reason":"Closed","labels":["brute-force","hang","parser","xref"]}
{"id":"pdfbox-bof","title":"Complete initial project setup for Crystal PDFBox port","description":"Set up project structure, documentation, and development workflow for Crystal PDFBox port including:\n- Update AGENTS.md with beads workflow and Crystal commands\n- Add ameba as dev dependency\n- Rewrite README.md with project description\n- Set up Apache PDFBox as git submodule\n- Create Makefile for development tasks\n- Ensure all quality checks pass","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T22:21:11.815437-07:00","created_by":"dominic","updated_at":"2026-01-24T22:21:19.40209-07:00","closed_at":"2026-01-24T22:21:19.40209-07:00","close_reason":"Completed all setup tasks:\n- Updated AGENTS.md with beads workflow and Crystal development commands\n- Added ameba as dev dependency in shard.yml\n- Rewrote README.md with comprehensive project description\n- Set up Apache PDFBox as git submodule\n- Created Makefile with development and submodule management tasks\n- All quality checks pass (formatting, linting, tests)"}
{"id":"pdfbox-byb","title":"Test compressed object stream parsing functionality","description":"Run existing tests and ensure compressed object stream parsing works correctly with caching","status":"closed","priority":1,"issue_type":"task","owner":"dsisnero@gmail.com","created_at":"2026-01-27T01:16:17.744989-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-27T01:34:46.303561-07:00","closed_at":"2026-01-27T01:34:46.303561-07:00","close_reason":"Closed","dependencies":[{"issue_id":"pdfbox-byb","depends_on_id":"pdfbox-8j0","type":"blocks","created_at":"2026-01-27T01:17:13.296253-07:00","created_by":"Dominic Sisneros"},{"issue_id":"pdfbox-byb","depends_on_id":"pdfbox-bbb","type":"blocks","created_at":"2026-01-27T01:17:13.351454-07:00","created_by":"Dominic Sisneros"},{"issue_id":"pdfbox-byb","depends_on_id":"pdfbox-ush","type":"blocks","created_at":"2026-01-27T01:17:13.406231-07:00","created_by":"Dominic Sisneros"},{"issue_id":"pdfbox-byb","depends_on_id":"pdfbox-tl7","type":"blocks","created_at":"2026-01-27T01:17:13.46943-07:00","created_by":"Dominic Sisneros"},{"issue_id":"pdfbox-byb","depends_on_id":"pdfbox-2ks","type":"blocks","created_at":"2026-01-27T01:17:13.526068-07:00","created_by":"Dominic Sisneros"}]}
{"id":"pdfbox-ccj","title":"Fix catalog dictionary parsing - nested dictionaries not fully consumed","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T18:26:59.3942-07:00","created_by":"dominic","updated_at":"2026-01-26T18:49:04.476823-07:00","closed_at":"2026-01-26T18:49:04.476823-07:00","close_reason":"Closed"}
{"id":"pdfbox-cli","title":"Port COS tests from Apache PDFBox","description":"Port all COS-related test files from Apache PDFBox Java to Crystal specs. Files include: TestCOSFloat.java, TestCOSName.java, TestCOSUpdateInfo.java, PDFDocEncodingTest.java, TestCOSNumber.java, TestCOSStream.java, TestCOSInteger.java, COSDocumentTest.java, TestCOSBase.java, TestCOSString.java, TestCOSBoolean.java, UnmodifiableCOSDictionaryTest.java, COSDictionaryTest.java, COSObjectKeyTest.java, TestCOSIncrement.java, TestCOSArray.java, COSArrayListTest.java. Mark tests as pending until implementation is complete.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T23:19:40.093371-07:00","created_by":"dominic","updated_at":"2026-01-24T23:47:24.650844-07:00","closed_at":"2026-01-24T23:47:24.650844-07:00","close_reason":"Closed"}
{"id":"pdfbox-cpy","title":"Implement PDF document structure classes","description":"Create PDFDocument class (equivalent to PDDocument), PDFPage class (equivalent to PDPage), and PDFBoxError hierarchy. Establish basic PDF object model.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T22:34:19.599194-07:00","created_by":"dominic","updated_at":"2026-01-24T22:45:36.814607-07:00","closed_at":"2026-01-24T22:45:36.814607-07:00","close_reason":"Implemented basic PDF document structure: Document, Page, Rectangle classes with PageSizes. Basic API for loading, saving, page management. More advanced features (encryption, annotations, forms, etc.) will be added in later milestones.","dependencies":[{"issue_id":"pdfbox-cpy","depends_on_id":"pdfbox-k6g","type":"blocks","created_at":"2026-01-24T22:34:27.316117-07:00","created_by":"dominic"}]}
{"id":"pdfbox-crv","title":"Implement PageLabelRange class","description":"Port PDPageLabelRange.java from Apache PDFBox to Crystal. Create a PageLabelRange class that represents a page label range with style, start value, and prefix.","status":"closed","priority":2,"issue_type":"task","owner":"dsisnero@gmail.com","created_at":"2026-01-26T23:13:56.100108-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-27T01:03:41.336677-07:00","closed_at":"2026-01-27T01:03:41.336677-07:00","close_reason":"Closed"}
{"id":"pdfbox-dd0","title":"Implement basic COS object parsing","description":"Implement ObjectParser methods in pdfparser.cr to parse individual COS objects (dictionary, array, string, name, number, boolean, null). These should use PDFIO utilities.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T22:50:36.713914-07:00","created_by":"dominic","updated_at":"2026-01-24T23:04:01.999478-07:00","closed_at":"2026-01-24T23:04:01.999478-07:00","close_reason":"Closed"}
{"id":"pdfbox-dy8","title":"Fix XRef stream parsing and PageLabels test failure","status":"closed","priority":2,"issue_type":"task","owner":"dsisnero@gmail.com","created_at":"2026-01-26T19:59:38.812594-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-26T20:28:41.294898-07:00","closed_at":"2026-01-26T20:28:41.294898-07:00","close_reason":"Closed"}
{"id":"pdfbox-ed0","title":"Modify ObjectParser to accept parser reference and create Cos::Object with parser","description":"ObjectParser needs to accept a parser (ICOSParser) reference so it can create Cos::Object instances with parser reference for lazy resolution instead of immediately resolving objects.","status":"closed","priority":2,"issue_type":"task","owner":"dsisnero@gmail.com","created_at":"2026-01-26T23:58:10.080589-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-27T00:25:53.120256-07:00","closed_at":"2026-01-27T00:25:53.120256-07:00","close_reason":"Closed"}
{"id":"pdfbox-edh","title":"Implement xref table parsing/writing","description":"Implement xref table parsing in Parser and writing in Writer. Handle basic cross-reference table format.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-24T22:50:52.435816-07:00","created_by":"dominic","updated_at":"2026-01-25T00:53:03.794367-07:00","closed_at":"2026-01-25T00:53:03.794367-07:00","close_reason":"Closed"}
{"id":"pdfbox-gp3","title":"Implement BOM handling for COS strings","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-25T00:17:55.510617-07:00","created_by":"dominic","updated_at":"2026-01-25T01:54:07.659441-07:00","closed_at":"2026-01-25T01:54:07.659441-07:00","close_reason":"Closed"}
{"id":"pdfbox-gt2","title":"Port TestCOSParser tests for COS object parsing","description":"Port Java tests from TestCOSParser.java to Crystal. Includes tests for parsing COS objects (dictionaries, arrays, strings, numbers, names, booleans, null, references) from PDF streams. These are low-level parser tests that ensure the COS parser works correctly.","status":"closed","priority":3,"issue_type":"task","owner":"dsisnero@gmail.com","created_at":"2026-01-25T02:04:47.666284-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-25T02:30:35.783648-07:00","closed_at":"2026-01-25T02:30:35.783648-07:00","close_reason":"Closed"}
{"id":"pdfbox-h2t","title":"Implement NumberTreeNode class","description":"Port PDNumberTreeNode.java from Apache PDFBox to Crystal. Create a NumberTreeNode class for parsing PDF number trees used in page labels and other structures.","status":"closed","priority":2,"issue_type":"task","owner":"dsisnero@gmail.com","created_at":"2026-01-26T23:14:01.547261-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-27T13:49:43.760852-07:00","closed_at":"2026-01-27T13:49:43.760852-07:00","close_reason":"Closed"}
{"id":"pdfbox-iz1","title":"Implement minimal PDF parsing/writing skeleton","description":"Create basic PDF parser and writer skeletons to validate core structure. Minimal functionality to read/write simple PDFs.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T22:34:19.719088-07:00","created_by":"dominic","updated_at":"2026-01-26T15:51:16.454019-07:00","closed_at":"2026-01-26T15:51:16.454019-07:00","close_reason":"Closed","dependencies":[{"issue_id":"pdfbox-iz1","depends_on_id":"pdfbox-k6g","type":"blocks","created_at":"2026-01-24T22:34:27.43142-07:00","created_by":"dominic"}]}
{"id":"pdfbox-j6t","title":"Port TestPDDocumentCatalog tests for catalog parsing","description":"Port Java tests from TestPDDocumentCatalog.java to ensure catalog parsing works correctly. These tests likely verify catalog dictionary parsing, metadata extraction, and document structure validation.","status":"closed","priority":3,"issue_type":"task","owner":"dsisnero@gmail.com","created_at":"2026-01-25T02:00:43.870591-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-26T15:49:59.95761-07:00","closed_at":"2026-01-26T15:49:59.95761-07:00","close_reason":"Closed"}
{"id":"pdfbox-jxu","title":"Fix PDFScanner reading entire file for each object causing 90ms parse times","status":"in_progress","priority":1,"issue_type":"task","owner":"dsisnero@gmail.com","created_at":"2026-01-28T03:49:14.74685-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-29T11:48:29.618358-07:00"}
{"id":"pdfbox-k6g","title":"Port Apache PDFBox to Crystal - Complete Project","description":"Complete port of Apache PDFBox from Java to Crystal following the plan.md milestones. Includes all modules: pdfbox, fontbox, xmpbox, io, tools. Will use Crystal idioms and standard libraries, port all tests, and add Prawn compatibility layer.","status":"in_progress","priority":2,"issue_type":"epic","created_at":"2026-01-24T22:31:06.368155-07:00","created_by":"dominic","updated_at":"2026-01-24T22:34:05.251465-07:00"}
{"id":"pdfbox-klw","title":"Integrate xref table into Document save/load","status":"closed","priority":3,"issue_type":"task","owner":"dsisnero@gmail.com","created_at":"2026-01-25T00:54:40.5345-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-25T01:31:47.255001-07:00","closed_at":"2026-01-25T01:31:47.255001-07:00","close_reason":"Closed"}
{"id":"pdfbox-kr1","title":"Implement PageLabels.labels_by_page_indices method","description":"Port PDPageLabels.getLabelsByPageIndices() method from Apache PDFBox to Crystal. Implement proper parsing of page labels number tree to generate labels for each page.","status":"closed","priority":2,"issue_type":"task","owner":"dsisnero@gmail.com","created_at":"2026-01-26T23:14:07.61534-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-27T01:03:47.343682-07:00","closed_at":"2026-01-27T01:03:47.343682-07:00","close_reason":"Closed"}
{"id":"pdfbox-l1i","title":"Update parse_indirect_object_at_offset to use object pool","description":"Parser.parse_indirect_object_at_offset should check object pool first and create Cos::Object with parser reference for lazy resolution instead of immediately returning resolved object.","status":"closed","priority":2,"issue_type":"task","owner":"dsisnero@gmail.com","created_at":"2026-01-26T23:58:38.319692-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-27T01:02:19.609849-07:00","closed_at":"2026-01-27T01:02:19.609849-07:00","close_reason":"Closed"}
{"id":"pdfbox-laf","title":"Port TestPDFParser tests for PDF parsing functionality","description":"Port Java tests from TestPDFParser.java to Crystal. Includes tests for catalog parsing, trailer rebuilding, missing catalog handling, and general PDF parser functionality. These tests verify the parser works correctly with various PDF files and edge cases.","status":"closed","priority":3,"issue_type":"task","owner":"dsisnero@gmail.com","created_at":"2026-01-25T02:03:37.153003-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-26T15:50:05.662401-07:00","closed_at":"2026-01-26T15:50:05.662401-07:00","close_reason":"Closed"}
{"id":"pdfbox-m0g","title":"Fix hang when loading PDFBOX-3947-670064.pdf (object stream parsing)","description":"Hang persists because BruteForceParser implementation is incomplete (missing methods, performance issues). Blocked by pdfbox-m19 and pdfbox-9cb.","status":"closed","priority":2,"issue_type":"bug","owner":"dsisnero@gmail.com","created_at":"2026-01-27T14:47:31.762432-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-28T19:10:41.545297-07:00","closed_at":"2026-01-28T19:10:41.545297-07:00","close_reason":"Closed","comments":[{"id":1,"issue_id":"pdfbox-m0g","author":"Dominic Sisneros","text":"Added debug logging and safety limits. Hang persists; root cause appears to be missing brute-force search for broken object streams. Parser gets stuck before reaching object stream parsing (likely in catalog resolution). Need to implement brute-force search (bfSearchForObjStreams) from Apache PDFBox.","created_at":"2026-01-27T22:22:25Z"}]}
{"id":"pdfbox-m19","title":"Port BruteForceParser with tests for broken PDF handling","description":"Core BruteForceParser implemented with bf_search_for_objects, bf_search_for_obj_streams_xref, etc. Integration with parser via lenient flag. However, PDFBOX-3947-670064.pdf still hangs due to missing methods (bfSearchForTrailer, searchForTrailerItems) and performance issues. Created pdfbox-9cb for remaining work.","notes":"Analyzed current implementation. Missing rebuildTrailer method. Need to implement rebuild_trailer in BruteForceParser and integrate into Parser when xref_offset is nil or trailer missing Root. Also need to optimize string? method performance.","status":"closed","priority":2,"issue_type":"task","owner":"dsisnero@gmail.com","created_at":"2026-01-27T15:30:00.990625-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-28T19:10:50.107916-07:00","closed_at":"2026-01-28T19:10:50.107916-07:00","close_reason":"Closed","labels":["brute-force","corrupted-pdfs","parser"],"dependencies":[{"issue_id":"pdfbox-m19","depends_on_id":"pdfbox-m0g","type":"blocks","created_at":"2026-01-27T15:30:00.993077-07:00","created_by":"Dominic Sisneros"}],"comments":[{"id":2,"issue_id":"pdfbox-m19","author":"Dominic Sisneros","text":"Key methods to port from Apache PDFBox BruteForceParser.java:\n\n1. Constructor: BruteForceParser(COSDocument, COSParser)\n2. bfSearchForObjects() - Main entry point\n3. bfSearchForObjStreams(Map\u003cCOSObjectKey, Long\u003e) - Critical for PDFBOX-3947\n4. bfSearchForObjStreamOffsets() - Find object stream offsets\n5. bfSearchForXRefTables() - Find xref tables\n6. bfSearchForXRefStreams() - Find xref streams  \n7. bfSearchForTrailer(COSDictionary) - Find trailer\n8. bfSearchForLastEOFMarker() - Find last EOF\n9. bfSearchForXRef(long) - Search for xref offset\n10. getBFCOSObjectOffsets() - Get found objects\n\nIntegration points:\n- COSParser.getBruteForceParser() method\n- XrefParser uses brute force when normal parsing fails\n- PDFParser fallback mechanism\n\nTest to port: testPDFBox3977 (brute force search for /Info dictionary)\nAlso ensure PDFBOX-3947, 3948, 3949 tests pass after implementation.","created_at":"2026-01-27T22:30:36Z"}]}
{"id":"pdfbox-o4u","title":"Complete compressed object stream parsing implementation","description":"Complete implementation of compressed object stream parsing to extract PageLabels objects (1350, 1352, 1358, 1360) from test_pagelabels.pdf.\n\nCurrent progress:\n1. XRef stream parsing with PNG predictor decoding works correctly\n2. Added parse_object_from_stream and parse_object_stream_contents methods\n3. Object stream 1 identified as containing compressed objects 13, 14, 15 (and likely PageLabels objects)\n4. Added decode_stream_data method for handling FlateDecode + Predictor streams\n\nRemaining work:\n1. Object stream 1 needs to be parsed (decompressed, object number/offset pairs extracted)\n2. Extract objects by index from stream data\n3. Test with object 13 (simple object) first\n4. Then extract PageLabels objects 1350, 1352, 1358, 1360\n5. Ensure catalog references PageLabels (may need to find correct catalog version)\n\nThis is required to fix failing test in spec/pdfbox/document_catalog_spec.cr:13","status":"open","priority":2,"issue_type":"task","owner":"dsisnero@gmail.com","created_at":"2026-01-26T21:00:19.519995-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-26T21:00:52.83803-07:00","dependencies":[{"issue_id":"pdfbox-o4u","depends_on_id":"pdfbox-pmh","type":"blocks","created_at":"2026-01-26T21:01:36.048578-07:00","created_by":"Dominic Sisneros"}]}
{"id":"pdfbox-oec","title":"Add object pool to Parser","description":"Parser needs an object pool (Hash of ObjectKey to Cos::Object) similar to Apache PDFBox's COSDocument.objectPool. This pool caches partially resolved objects and allows reuse during lazy resolution.","status":"closed","priority":2,"issue_type":"task","owner":"dsisnero@gmail.com","created_at":"2026-01-26T23:58:03.186889-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-27T00:18:24.896625-07:00","closed_at":"2026-01-27T00:18:24.896625-07:00","close_reason":"Closed"}
{"id":"pdfbox-pmh","title":"Implement compressed object stream parsing","notes":"Partially implemented: XRef stream parsing with PNG predictor works. Added parse_object_from_stream and parse_object_stream_contents methods. Object stream 1 identified. Need to complete object extraction from stream data. Continued in pdfbox-o4u.","status":"closed","priority":2,"issue_type":"task","owner":"dsisnero@gmail.com","created_at":"2026-01-26T20:28:48.537304-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-27T01:34:54.027126-07:00","closed_at":"2026-01-27T01:34:54.027126-07:00","close_reason":"Closed","dependencies":[{"issue_id":"pdfbox-pmh","depends_on_id":"pdfbox-8j0","type":"blocks","created_at":"2026-01-27T01:16:39.069587-07:00","created_by":"Dominic Sisneros"},{"issue_id":"pdfbox-pmh","depends_on_id":"pdfbox-bbb","type":"blocks","created_at":"2026-01-27T01:16:48.650694-07:00","created_by":"Dominic Sisneros"},{"issue_id":"pdfbox-pmh","depends_on_id":"pdfbox-ush","type":"blocks","created_at":"2026-01-27T01:16:48.710243-07:00","created_by":"Dominic Sisneros"},{"issue_id":"pdfbox-pmh","depends_on_id":"pdfbox-tl7","type":"blocks","created_at":"2026-01-27T01:16:48.764148-07:00","created_by":"Dominic Sisneros"},{"issue_id":"pdfbox-pmh","depends_on_id":"pdfbox-2ks","type":"blocks","created_at":"2026-01-27T01:16:48.817312-07:00","created_by":"Dominic Sisneros"},{"issue_id":"pdfbox-pmh","depends_on_id":"pdfbox-byb","type":"blocks","created_at":"2026-01-27T01:16:48.871707-07:00","created_by":"Dominic Sisneros"}]}
{"id":"pdfbox-qfz","title":"Implement create_random_access_read_view method in Parser","description":"Parser needs to implement create_random_access_read_view method from ICOSParser interface. This method should create a RandomAccessReadView for reading stream data, similar to Apache PDFBox's COSParser.createRandomAccessReadView.","status":"closed","priority":2,"issue_type":"task","owner":"dsisnero@gmail.com","created_at":"2026-01-26T23:58:31.541087-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-27T00:18:42.465356-07:00","closed_at":"2026-01-27T00:18:42.465356-07:00","close_reason":"Closed"}
{"id":"pdfbox-sut","title":"Optimize xref parsing and reduce warning verbosity for corrupted PDFs","status":"closed","priority":2,"issue_type":"task","owner":"dsisnero@gmail.com","created_at":"2026-01-28T01:02:04.306938-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-28T01:23:20.634542-07:00","closed_at":"2026-01-28T01:23:20.634542-07:00","close_reason":"Closed"}
{"id":"pdfbox-tin","title":"Integrate parser/writer with Document class","description":"Update Document.load to use Parser and Document.save to use Writer. Create basic integration that can read/write simple PDFs.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T22:50:49.788939-07:00","created_by":"dominic","updated_at":"2026-01-25T00:29:58.950026-07:00","closed_at":"2026-01-25T00:29:58.950026-07:00","close_reason":"Closed"}
{"id":"pdfbox-tl7","title":"Update parse_object_stream_contents to optionally parse all objects","description":"Enhance parse_object_stream_contents to support parsing all objects at once and caching them, not just single object by index","status":"closed","priority":2,"issue_type":"task","owner":"dsisnero@gmail.com","created_at":"2026-01-27T01:16:06.036742-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-27T01:34:27.454343-07:00","closed_at":"2026-01-27T01:34:27.454343-07:00","close_reason":"Closed","dependencies":[{"issue_id":"pdfbox-tl7","depends_on_id":"pdfbox-bbb","type":"blocks","created_at":"2026-01-27T01:17:04.807811-07:00","created_by":"Dominic Sisneros"}]}
{"id":"pdfbox-ush","title":"Modify parse_object_from_stream to use cache","description":"Update parse_object_from_stream method to check decompressed_objects cache first before parsing, similar to Apache PDFBox's parseObjectStreamObject method","status":"closed","priority":1,"issue_type":"task","owner":"dsisnero@gmail.com","created_at":"2026-01-27T01:16:00.049665-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-27T01:25:16.389432-07:00","closed_at":"2026-01-27T01:25:16.389432-07:00","close_reason":"Closed","dependencies":[{"issue_id":"pdfbox-ush","depends_on_id":"pdfbox-8j0","type":"blocks","created_at":"2026-01-27T01:16:59.036434-07:00","created_by":"Dominic Sisneros"},{"issue_id":"pdfbox-ush","depends_on_id":"pdfbox-bbb","type":"blocks","created_at":"2026-01-27T01:16:59.091481-07:00","created_by":"Dominic Sisneros"}]}
{"id":"pdfbox-ws1","title":"Investigate missing PageLabels in catalog for test_pagelabels.pdf","notes":"Investigation findings:\n1. XRef stream at offset 768 shows objects 13, 14, 15 are compressed entries pointing to object stream 1\n2. PageLabels objects (1350, 1352, 1358, 1360) are likely in object stream 1\n3. Catalog at offset 935 (object 17) doesn't reference PageLabels\n4. Later catalog versions may exist in xref chain but need proper resolution\n5. Need to complete compressed object parsing (pdfbox-pmh, pdfbox-o4u) to extract PageLabels objects","status":"closed","priority":2,"issue_type":"task","owner":"dsisnero@gmail.com","created_at":"2026-01-26T20:28:55.044883-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-26T23:14:22.650572-07:00","closed_at":"2026-01-26T23:14:22.650572-07:00","close_reason":"Investigation complete: PageLabels object 1352 found in catalog, but labels_by_page_indices returns empty due to stub implementation. Need to implement proper PageLabels parsing."}
{"id":"pdfbox-yx0","title":"Port PDF writer tests from Apache PDFBox","description":"Port all PDF writer test files from Apache PDFBox Java to Crystal specs. Files include: COSWriterTest.java, COSWriterCompressionPoolTest.java, ContentStreamWriterTest.java, COSDocumentCompressionTest.java, TestToUnicodeWriter.java.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T23:19:47.019267-07:00","created_by":"dominic","updated_at":"2026-01-25T00:09:29.463505-07:00","closed_at":"2026-01-25T00:09:29.463505-07:00","close_reason":"Closed"}
{"id":"pdfbox-zfi","title":"Integrate NumberTreeNode with PageLabels","status":"closed","priority":2,"issue_type":"task","owner":"dsisnero@gmail.com","created_at":"2026-01-27T13:51:21.742649-07:00","created_by":"Dominic Sisneros","updated_at":"2026-01-27T14:13:26.926023-07:00","closed_at":"2026-01-27T14:13:26.926023-07:00","close_reason":"Closed"}
